openapi: 3.0.3
info:
  title: Database db-11 - Database API Specification
  description: "This database implements a comprehensive parking intelligence system\
    \ for marketing analysis, mirroring SpotHero's business model. The database aggregates\
    \ parking facility data, demographics, traffic patterns, airport statistics, venue\
    \ information, and market intelligence metrics from government sources to support\
    \ parking marketplace operations across 400+ cities in North America.\n\n- Parking\
    \ Facility Intelligence: Comprehensive database of parking facilities (lots, garages,\
    \ structures) with pricing, utilization, and capacity data\n- Market Intelligence:\
    \ Calculated metrics for market demand, supply analysis, competitive positioning,\
    \ and revenue optimization\n- Geographic Coverage: 400+ cities across USA and\
    \ Canada with metropolitan area and city-level demographics\n- Event-Based Analysis:\
    \ Stadium and venue data with event scheduling and parking demand forecasting\n\
    - Traffic Correlation: Traffic volume data from FHWA correlated with parking demand\
    \ patterns\n- Airport Integration: Top 50 airports by passenger volume with parking\
    \ capacity and utilization\n- Data Integration: ETL/ELT pipelines pulling 1+ GB\
    \ of data from public APIs (Data.gov, Census Bureau, BTS, FAA, FHWA, City Open\
    \ Data Portals)\n\n- PostgreSQL: Full support with PostGIS for spatial data (GEOGRAPHY\
    \ type)\n\nThis database powers a parking intelligence platform sourced from businesses\
    \ with at least $1M ARR per year. The queries demonstrate production-grade patterns\
    \ used by:\n- SpotHero: Parking marketplace with dynamic pricing and demand forecasting\n\
    - ParkWhiz: Parking reservation platform with market intelligence\n- Parkopedia:\
    \ Global parking database with utilization analytics\n- BestParking: Parking search\
    \ and comparison platform\n\n---\n\n---\n\nThis section provides a comprehensive\
    \ data dictionary for all tables in the database, including column names, data\
    \ types, constraints, and descriptions. Tables are organized by functional category\
    \ for easier navigation.\n\nThe Parking Intelligence Database consists of 14 main\
    \ tables designed to store parking facility data, demographics, traffic patterns,\
    \ airport statistics, venue information, and market intelligence metrics from\
    \ government sources.\n\n1. Geographic Data: `metropolitan_areas`, `cities`, `business_districts`\n\
    2. Transportation: `airports`, `traffic_volume_data`\n3. Venues: `stadiums_venues`,\
    \ `events`\n4. Parking Facilities: `parking_facilities`, `parking_pricing`, `parking_utilization`\n\
    5. Market Intelligence: `market_intelligence_metrics`, `competitive_analysis`\n\
    6. Data Management: `facility_district_mapping`, `data_source_metadata`\n\n1.\
    \ Data.gov CKAN API - Parking facility datasets from various cities\n2. Census\
    \ Bureau API - Demographics and population data for metropolitan areas\n3. BTS\
    \ TranStats - Airport passenger volumes and statistics\n4. FAA Airport Data -\
    \ Passenger boarding and cargo statistics\n5. FHWA Traffic Data - Traffic volume\
    \ trends and highway statistics\n6. City Open Data Portals - Real-time parking\
    \ utilization and pricing data\n\n- 400+ cities across USA and Canada\n- Major\
    \ metropolitan areas (MSAs)\n- Top 50 airports by passenger volume\n- Major sports\
    \ stadiums and venues\n- Business districts and downtown areas\n\n---\n\n---\n\
    \n---\n\nThis database includes 30 production SQL queries, each designed to solve\
    \ specific business problems for companies with $1M+ ARR. Each query includes:\n\
    \n- Business Use Case: The specific business problem this query solves\n- Description:\
    \ Technical explanation of what the query does\n- Client Deliverable: What output\
    \ or report this query generates\n- Business Value: The business impact and value\
    \ delivered\n- Complexity: Technical complexity indicators\n- SQL Code: Complete,\
    \ production-ready SQL query\n\n---\n\nUse Case: Identify high-demand markets\
    \ for parking marketplace expansion by analyzing utilization patterns, demographic\
    \ indicators, and traffic correlations across 400+ cities.\n\nDescription: Analyzes\
    \ parking demand across metropolitan areas using multi-level CTEs, spatial aggregations,\
    \ temporal window functions, and demographic correlations. Calculates demand scores\
    \ by combining utilization rates, population density, traffic volumes, and economic\
    \ indicators with weighted scoring algorithms.\n\nUse Case: Identify high-demand\
    \ markets for parking marketplace expansion by analyzing utilization patterns,\
    \ demographic indicators, and traffic correlations across 400+ cities.\n\nBusiness\
    \ Value: Market expansion prioritization report showing demand scores, growth\
    \ potential, and revenue opportunities by metropolitan area. Enables data-driven\
    \ market entry decisions for parking marketplace platforms.\n\nPurpose: Quantifies\
    \ parking demand potential across geographic markets using multi-factor analysis,\
    \ enabling strategic market expansion planning.\n\nComplexity: Deep nested CTEs\
    \ (8+ levels), spatial aggregations, complex window functions with multiple frame\
    \ clauses, percentile calculations, weighted scoring algorithms, temporal pattern\
    \ analysis, correlated subqueries, multi-table joins\n\nExpected Output: Market\
    \ demand scores by metropolitan area with rankings, growth indicators, and expansion\
    \ recommendations.\n\n---\n\nUse Case: Optimize pricing strategies by analyzing\
    \ competitor pricing, market share, and pricing elasticity across geographic clusters\
    \ of parking facilities.\n\nDescription: Analyzes competitive parking landscape\
    \ using multi-level CTEs for market penetration analysis, pricing elasticity calculations,\
    \ distance-based competitive clustering, and revenue optimization modeling. Identifies\
    \ pricing gaps and competitive advantages through multi-dimensional analysis.\n\
    \nUse Case: Optimize pricing strategies by analyzing competitor pricing, market\
    \ share, and pricing elasticity across geographic clusters of parking facilities.\n\
    \nBusiness Value: Competitive pricing intelligence report showing optimal pricing\
    \ strategies, market share opportunities, and revenue maximization recommendations\
    \ by facility cluster.\n\nPurpose: Enables data-driven pricing decisions by identifying\
    \ competitive gaps and pricing optimization opportunities in local markets.\n\n\
    Complexity: Multi-level CTEs for market clustering, complex aggregations with\
    \ window functions, distance calculations, pricing elasticity modeling, percentile\
    \ rankings, multi-level joins\n\nExpected Output: Competitive analysis by facility\
    \ cluster with pricing recommendations, market share calculations, and revenue\
    \ optimization opportunities.\n\n---\n\nUse Case: Predict parking demand and optimize\
    \ pricing for upcoming events (sports games, concerts, conventions) to maximize\
    \ revenue and ensure availability.\n\nDescription: Forecasts parking demand for\
    \ events using multi-level CTEs for event pattern analysis, temporal correlation\
    \ with historical utilization, venue capacity modeling, and dynamic pricing recommendations.\
    \ Analyzes event types, attendance patterns, and parking multiplier effects.\n\
    \nUse Case: Predict parking demand and optimize pricing for upcoming events (sports\
    \ games, concerts, conventions) to maximize revenue and ensure availability.\n\
    \nBusiness Value: Event parking demand forecast report with pricing recommendations,\
    \ capacity planning, and revenue optimization strategies for event-based parking\
    \ operations.\n\nPurpose: Enables proactive event parking management by forecasting\
    \ demand and optimizing pricing strategies based on historical patterns and event\
    \ characteristics.\n\nComplexity: Multi-level CTEs for event pattern analysis,\
    \ temporal window functions, correlation analysis, demand multiplier calculations,\
    \ revenue optimization modeling, multi-table joins with aggregations\n\nExpected\
    \ Output: Event parking demand forecasts with pricing recommendations and revenue\
    \ optimization opportunities.\n\n---\n\nUse Case: Optimize airport parking revenue\
    \ by analyzing passenger volume correlations, seasonal patterns, and pricing strategies\
    \ across different airport facilities.\n\nDescription: Analyzes airport parking\
    \ performance using multi-level CTEs, passenger volume correlations, seasonal\
    \ pattern detection with window functions, pricing elasticity modeling, and revenue\
    \ optimization across airport facilities.\n\nUse Case: Optimize airport parking\
    \ revenue by analyzing passenger volume correlations, seasonal patterns, and pricing\
    \ strategies across different airport facilities.\n\nBusiness Value: Airport parking\
    \ revenue optimization report with seasonal pricing recommendations, capacity\
    \ utilization analysis, and passenger volume correlation insights.\n\nPurpose:\
    \ Maximizes airport parking revenue through data-driven pricing and capacity optimization\
    \ based on passenger patterns and seasonal trends.\n\nComplexity: Multi-level\
    \ CTEs (6+ levels), temporal window functions with seasonal patterns, correlation\
    \ analysis, revenue optimization modeling, percentile calculations, multi-table\
    \ joins\n\nExpected Output: Airport parking revenue optimization recommendations\
    \ with seasonal pricing strategies and capacity utilization insights.\n\n---\n\
    \nUse Case: Predict parking demand based on traffic patterns and optimize facility\
    \ locations near high-traffic corridors to maximize utilization and revenue.\n\
    \nDescription: Correlates traffic volume patterns with parking utilization using\
    \ multi-level CTEs, temporal alignment analysis, lag correlation calculations,\
    \ and demand forecasting models. Identifies traffic patterns that predict parking\
    \ demand and optimizes facility placement.\n\nUse Case: Predict parking demand\
    \ based on traffic patterns and optimize facility locations near high-traffic\
    \ corridors to maximize utilization and revenue.\n\nBusiness Value: Traffic-parking\
    \ correlation report with demand forecasting, optimal facility placement recommendations,\
    \ and revenue impact analysis for strategic facility development.\n\nPurpose:\
    \ Enables data-driven facility placement decisions by correlating traffic patterns\
    \ with parking demand patterns.\n\nComplexity: Multi-level CTEs (7+ levels), temporal\
    \ correlation analysis, lag functions, demand forecasting models, spatial proximity\
    \ calculations, revenue impact modeling\n\nExpected Output: Traffic-parking correlation\
    \ analysis with demand forecasts and facility placement recommendations.\n\n---\n\
    \nUse Case: Optimize pricing and marketing strategies by targeting specific demographic\
    \ segments based on income, age, and employment patterns.\n\nDescription: Analyzes\
    \ parking demand by demographic segments using multi-level CTEs, income correlation\
    \ analysis, age-based pattern detection, employment correlation, and demographic\
    \ targeting optimization. Identifies optimal pricing strategies for different\
    \ demographic segments.\n\nUse Case: Optimize pricing and marketing strategies\
    \ by targeting specific demographic segments based on income, age, and employment\
    \ patterns.\n\nBusiness Value: Demographic targeting report with segment-specific\
    \ pricing recommendations, market penetration analysis, and revenue optimization\
    \ by demographic cohort.\n\nPurpose: Enables targeted marketing and pricing strategies\
    \ by understanding demographic preferences and parking behavior patterns.\n\n\
    Complexity: Multi-level CTEs (6+ levels), demographic segmentation, correlation\
    \ analysis, market penetration calculations, revenue optimization modeling, percentile\
    \ rankings\n\nExpected Output: Demographic targeting analysis with segment-specific\
    \ pricing and marketing recommendations.\n\n---\n\nUse Case: Identify distinct\
    \ market segments for targeted marketing campaigns and segment-specific pricing\
    \ strategies based on demographic, economic, and utilization characteristics.\n\
    \nDescription: Segments parking markets using multi-dimensional clustering analysis\
    \ with multi-level CTEs, K-means-like grouping algorithms, revenue potential scoring,\
    \ segment-specific optimization strategies, and demographic-economic correlation\
    \ analysis.\n\nUse Case: Identify distinct market segments for targeted marketing\
    \ campaigns and segment-specific pricing strategies based on demographic, economic,\
    \ and utilization characteristics.\n\nBusiness Value: Market segmentation report\
    \ with segment profiles, revenue potential scores, optimization recommendations,\
    \ and targeted marketing strategies for each segment.\n\nPurpose: Enables targeted\
    \ marketing and pricing by identifying homogeneous market segments with similar\
    \ characteristics and behaviors.\n\nComplexity: Multi-level CTEs (7+ levels),\
    \ clustering algorithms, multi-dimensional distance calculations, revenue optimization\
    \ modeling, segment profiling, percentile rankings\n\nExpected Output: Market\
    \ segments with characteristics, revenue potential, and optimization recommendations.\n\
    \n---\n\nUse Case: Identify utilization patterns, seasonal trends, and anomalies\
    \ for capacity planning, pricing optimization, and operational efficiency improvements.\n\
    \nDescription: Analyzes parking utilization patterns using time-series decomposition\
    \ CTEs, seasonal trend analysis with window functions, anomaly detection algorithms\
    \ using statistical methods, and pattern classification for capacity planning.\n\
    \nUse Case: Identify utilization patterns, seasonal trends, and anomalies for\
    \ capacity planning, pricing optimization, and operational efficiency improvements.\n\
    \nBusiness Value: Utilization pattern report with trend analysis, anomaly alerts,\
    \ capacity planning recommendations, and operational optimization strategies.\n\
    \nPurpose: Enables data-driven capacity planning and operational optimization\
    \ by identifying patterns and anomalies in parking utilization data.\n\nComplexity:\
    \ Time-series CTEs (6+ levels), decomposition analysis, statistical anomaly detection,\
    \ pattern classification, moving averages, seasonal decomposition\n\nExpected\
    \ Output: Utilization patterns with trend analysis, anomaly flags, and capacity\
    \ planning recommendations.\n\n---\n\nUse Case: Prioritize geographic expansion\
    \ markets by analyzing market opportunities, competitive landscapes, and risk\
    \ factors for strategic market entry decisions.\n\nDescription: Identifies geographic\
    \ expansion opportunities using multi-level CTEs, market opportunity scoring algorithms,\
    \ competitive landscape analysis, risk assessment modeling, and expansion prioritization\
    \ ranking.\n\nUse Case: Prioritize geographic expansion markets by analyzing market\
    \ opportunities, competitive landscapes, and risk factors for strategic market\
    \ entry decisions.\n\nBusiness Value: Geographic expansion report with market\
    \ opportunity scores, risk assessments, competitive analysis, and prioritized\
    \ expansion recommendations.\n\nPurpose: Enables data-driven geographic expansion\
    \ decisions by quantifying market opportunities and risks across potential expansion\
    \ markets.\n\nComplexity: Multi-level CTEs (7+ levels), market scoring algorithms,\
    \ risk modeling, competitive analysis, spatial proximity calculations, expansion\
    \ prioritization\n\nExpected Output: Market expansion opportunities with opportunity\
    \ scores, risk assessments, and expansion priorities.\n\n---\n\nUse Case: Predict\
    \ future revenue trends for financial planning and budget forecasting.\n\nDescription:\
    \ Forecasts parking revenue using time-series analysis CTEs, ARIMA-like modeling,\
    \ confidence interval calculations, and revenue projection scenarios.\n\nUse Case:\
    \ Predict future revenue trends for financial planning and budget forecasting.\n\
    \nBusiness Value: Revenue forecast report with projections, confidence intervals,\
    \ and scenario analysis.\n\nPurpose: Enables data-driven decision making through\
    \ advanced analytics and business intelligence.\n\nComplexity: Time-series CTEs\
    \ (7+ levels), forecasting models, confidence intervals, scenario analysis\n\n\
    Expected Output: Query results with analysis and recommendations.\n\n---\n\nUse\
    \ Case: Understand competitive position and develop strategic recommendations\
    \ for market leadership.\n\nDescription: Analyzes competitive positioning using\
    \ multi-level CTEs, market share calculations, competitive advantage scoring,\
    \ and strategic positioning recommendations.\n\nUse Case: Understand competitive\
    \ position and develop strategic recommendations for market leadership.\n\nBusiness\
    \ Value: Competitive positioning report with market share analysis and strategic\
    \ recommendations.\n\nPurpose: Enables data-driven decision making through advanced\
    \ analytics and business intelligence.\n\nComplexity: Multi-level CTEs (6+ levels),\
    \ market share calculations, competitive analysis, strategic scoring\n\nExpected\
    \ Output: Query results with analysis and recommendations.\n\n---\n\nUse Case:\
    \ Optimize parking strategies for business districts based on employment patterns\
    \ and demand.\n\nDescription: Analyzes business districts using spatial CTEs,\
    \ employment correlation analysis, parking demand modeling, and district-specific\
    \ revenue optimization.\n\nUse Case: Optimize parking strategies for business\
    \ districts based on employment patterns and demand.\n\nBusiness Value: Business\
    \ district analysis report with demand correlations and revenue optimization strategies.\n\
    \nPurpose: Enables data-driven decision making through advanced analytics and\
    \ business intelligence.\n\nComplexity: Spatial CTEs (6+ levels), correlation\
    \ analysis, demand modeling, revenue optimization\n\nExpected Output: Query results\
    \ with analysis and recommendations.\n\n---\n\nUse Case: Optimize monthly parking\
    \ pricing to maximize customer lifetime value and retention.\n\nDescription: Optimizes\
    \ monthly parking pricing using CTEs for customer segmentation, lifetime value\
    \ calculations, retention analysis, and pricing optimization.\n\nUse Case: Optimize\
    \ monthly parking pricing to maximize customer lifetime value and retention.\n\
    \nBusiness Value: Monthly parking optimization report with CLV analysis and retention\
    \ strategies.\n\nPurpose: Enables data-driven decision making through advanced\
    \ analytics and business intelligence.\n\nComplexity: Customer segmentation CTEs\
    \ (7+ levels), CLV calculations, retention modeling, pricing optimization\n\n\
    Expected Output: Query results with analysis and recommendations.\n\n---\n\nUse\
    \ Case: Plan EV charging facility expansion and optimize revenue from EV charging\
    \ services.\n\nDescription: Analyzes EV charging facilities using multi-level\
    \ CTEs, demand forecasting, revenue impact calculations, and expansion recommendations.\n\
    \nUse Case: Plan EV charging facility expansion and optimize revenue from EV charging\
    \ services.\n\nBusiness Value: EV charging analysis report with demand forecasts\
    \ and expansion recommendations.\n\nPurpose: Enables data-driven decision making\
    \ through advanced analytics and business intelligence.\n\nComplexity: Multi-level\
    \ CTEs (6+ levels), demand forecasting, revenue impact modeling, expansion analysis\n\
    \nExpected Output: Query results with analysis and recommendations.\n\n---\n\n\
    Use Case: Optimize reservation vs walk-in mix to maximize revenue and capacity\
    \ utilization.\n\nDescription: Compares reservation and walk-in patterns using\
    \ CTEs for pattern analysis, revenue comparison, capacity optimization, and booking\
    \ strategy recommendations.\n\nUse Case: Optimize reservation vs walk-in mix to\
    \ maximize revenue and capacity utilization.\n\nBusiness Value: Reservation analysis\
    \ report with revenue optimization and capacity planning recommendations.\n\n\
    Purpose: Enables data-driven decision making through advanced analytics and business\
    \ intelligence.\n\nComplexity: Pattern analysis CTEs (6+ levels), revenue comparison,\
    \ capacity optimization, booking strategies\n\nExpected Output: Query results\
    \ with analysis and recommendations.\n\n---\n\nUse Case: Implement dynamic pricing\
    \ and capacity management for peak hours to maximize revenue.\n\nDescription:\
    \ Analyzes peak hour patterns using temporal CTEs, dynamic pricing models, capacity\
    \ management algorithms, and revenue maximization strategies.\n\nUse Case: Implement\
    \ dynamic pricing and capacity management for peak hours to maximize revenue.\n\
    \nBusiness Value: Peak hour analysis report with dynamic pricing recommendations\
    \ and capacity management strategies.\n\nPurpose: Enables data-driven decision\
    \ making through advanced analytics and business intelligence.\n\nComplexity:\
    \ Temporal CTEs (7+ levels), dynamic pricing models, capacity management, revenue\
    \ optimization\n\nExpected Output: Query results with analysis and recommendations.\n\
    \n---\n\nUse Case: Optimize pricing strategies for weekends vs weekdays to maximize\
    \ revenue.\n\nDescription: Compares weekend and weekday patterns using CTEs for\
    \ pattern analysis, pricing strategy optimization, and revenue maximization.\n\
    \nUse Case: Optimize pricing strategies for weekends vs weekdays to maximize revenue.\n\
    \nBusiness Value: Weekend/weekday analysis report with pricing strategy recommendations.\n\
    \nPurpose: Enables data-driven decision making through advanced analytics and\
    \ business intelligence.\n\nComplexity: Pattern comparison CTEs (6+ levels), pricing\
    \ optimization, revenue analysis\n\nExpected Output: Query results with analysis\
    \ and recommendations.\n\n---\n\nUse Case: Optimize facility type mix and strategies\
    \ for different facility types.\n\nDescription: Analyzes facility types using\
    \ CTEs for performance benchmarking, revenue comparison, optimization recommendations,\
    \ and type-specific strategies.\n\nUse Case: Optimize facility type mix and strategies\
    \ for different facility types.\n\nBusiness Value: Facility type analysis report\
    \ with performance benchmarks and optimization recommendations.\n\nPurpose: Enables\
    \ data-driven decision making through advanced analytics and business intelligence.\n\
    \nComplexity: Benchmarking CTEs (6+ levels), performance comparison, optimization\
    \ modeling\n\nExpected Output: Query results with analysis and recommendations.\n\
    \n---\n\nUse Case: Understand operator type dynamics and develop competitive strategies.\n\
    \nDescription: Analyzes operator types using CTEs for market share calculations,\
    \ competitive advantage assessment, and operator-specific strategies.\n\nUse Case:\
    \ Understand operator type dynamics and develop competitive strategies.\n\nBusiness\
    \ Value: Operator type analysis report with market share and competitive advantage\
    \ insights.\n\nPurpose: Enables data-driven decision making through advanced analytics\
    \ and business intelligence.\n\nComplexity: Market analysis CTEs (6+ levels),\
    \ competitive assessment, strategic analysis\n\nExpected Output: Query results\
    \ with analysis and recommendations.\n\n---\n\nUse Case: Identify best practices\
    \ and performance benchmarks across cities.\n\nDescription: Compares multiple\
    \ cities using CTEs for performance benchmarking, best practice identification,\
    \ and cross-city learning opportunities.\n\nUse Case: Identify best practices\
    \ and performance benchmarks across cities.\n\nBusiness Value: Multi-city comparison\
    \ report with benchmarks and best practices.\n\nPurpose: Enables data-driven decision\
    \ making through advanced analytics and business intelligence.\n\nComplexity:\
    \ Comparison CTEs (7+ levels), benchmarking, best practice analysis\n\nExpected\
    \ Output: Query results with analysis and recommendations.\n\n---\n\nUse Case:\
    \ Analyze markets at metropolitan area level for regional expansion planning.\n\
    \nDescription: Aggregates data at MSA level using CTEs for regional analysis,\
    \ market intelligence, and expansion opportunity identification.\n\nUse Case:\
    \ Analyze markets at metropolitan area level for regional expansion planning.\n\
    \nBusiness Value: MSA-level intelligence report with regional insights and expansion\
    \ opportunities.\n\nPurpose: Enables data-driven decision making through advanced\
    \ analytics and business intelligence.\n\nComplexity: Aggregation CTEs (6+ levels),\
    \ regional analysis, expansion planning\n\nExpected Output: Query results with\
    \ analysis and recommendations.\n\n---\n\nUse Case: Forecast future trends and\
    \ patterns for strategic planning.\n\nDescription: Forecasts time-series patterns\
    \ using CTEs for seasonal decomposition, trend analysis, and predictive modeling.\n\
    \nUse Case: Forecast future trends and patterns for strategic planning.\n\nBusiness\
    \ Value: Time-series forecast report with seasonal patterns and trend projections.\n\
    \nPurpose: Enables data-driven decision making through advanced analytics and\
    \ business intelligence.\n\nComplexity: Time-series CTEs (7+ levels), decomposition,\
    \ trend analysis, forecasting\n\nExpected Output: Query results with analysis\
    \ and recommendations.\n\n---\n\nUse Case: Identify anomalies and outliers for\
    \ operational monitoring and alerting.\n\nDescription: Detects anomalies using\
    \ CTEs with statistical methods, outlier identification, and alert generation\
    \ for operational monitoring.\n\nUse Case: Identify anomalies and outliers for\
    \ operational monitoring and alerting.\n\nBusiness Value: Anomaly detection report\
    \ with statistical analysis and alert recommendations.\n\nPurpose: Enables data-driven\
    \ decision making through advanced analytics and business intelligence.\n\nComplexity:\
    \ Statistical CTEs (6+ levels), outlier detection, alert generation\n\nExpected\
    \ Output: Query results with analysis and recommendations.\n\n---\n\nUse Case:\
    \ Segment customers for targeted marketing and personalized strategies.\n\nDescription:\
    \ Segments customers using CTEs for behavioral analysis, pattern identification,\
    \ and targeted marketing strategies.\n\nUse Case: Segment customers for targeted\
    \ marketing and personalized strategies.\n\nBusiness Value: Customer segmentation\
    \ report with behavioral insights and targeting strategies.\n\nPurpose: Enables\
    \ data-driven decision making through advanced analytics and business intelligence.\n\
    \nComplexity: Segmentation CTEs (7+ levels), behavioral analysis, targeting strategies\n\
    \nExpected Output: Query results with analysis and recommendations.\n\n---\n\n\
    Use Case: Understand price sensitivity and optimize pricing for revenue maximization.\n\
    \nDescription: Analyzes price elasticity using CTEs for demand response modeling,\
    \ elasticity calculations, and revenue optimization.\n\nUse Case: Understand price\
    \ sensitivity and optimize pricing for revenue maximization.\n\nBusiness Value:\
    \ Price elasticity report with demand response analysis and pricing recommendations.\n\
    \nPurpose: Enables data-driven decision making through advanced analytics and\
    \ business intelligence.\n\nComplexity: Elasticity CTEs (6+ levels), demand modeling,\
    \ revenue optimization\n\nExpected Output: Query results with analysis and recommendations.\n\
    \n---\n\nUse Case: Identify supply-demand gaps and plan facility expansion.\n\n\
    Description: Analyzes supply-demand gaps using CTEs for gap identification, capacity\
    \ planning, and expansion recommendations.\n\nUse Case: Identify supply-demand\
    \ gaps and plan facility expansion.\n\nBusiness Value: Supply-demand gap report\
    \ with capacity planning and expansion recommendations.\n\nPurpose: Enables data-driven\
    \ decision making through advanced analytics and business intelligence.\n\nComplexity:\
    \ Gap analysis CTEs (6+ levels), capacity planning, expansion modeling\n\nExpected\
    \ Output: Query results with analysis and recommendations.\n\n---\n\nUse Case:\
    \ Measure market penetration and develop expansion strategies.\n\nDescription:\
    \ Analyzes market penetration using CTEs for penetration calculations, growth\
    \ metrics, and expansion strategy development.\n\nUse Case: Measure market penetration\
    \ and develop expansion strategies.\n\nBusiness Value: Market penetration report\
    \ with growth metrics and expansion strategies.\n\nPurpose: Enables data-driven\
    \ decision making through advanced analytics and business intelligence.\n\nComplexity:\
    \ Penetration CTEs (6+ levels), growth metrics, expansion strategies\n\nExpected\
    \ Output: Query results with analysis and recommendations.\n\n---\n\nUse Case:\
    \ Optimize facility efficiency and space utilization for revenue maximization.\n\
    \nDescription: Analyzes revenue per square foot using CTEs for efficiency calculations,\
    \ facility optimization, and space utilization analysis.\n\nUse Case: Optimize\
    \ facility efficiency and space utilization for revenue maximization.\n\nBusiness\
    \ Value: Revenue efficiency report with facility optimization recommendations.\n\
    \nPurpose: Enables data-driven decision making through advanced analytics and\
    \ business intelligence.\n\nComplexity: Efficiency CTEs (6+ levels), space utilization,\
    \ optimization modeling\n\nExpected Output: Query results with analysis and recommendations.\n\
    \n---\n\nUse Case: Provide executive dashboard with comprehensive market intelligence\
    \ metrics.\n\nDescription: Creates comprehensive dashboard using CTEs for multi-dimensional\
    \ analytics, KPI calculations, and executive reporting.\n\nUse Case: Provide executive\
    \ dashboard with comprehensive market intelligence metrics.\n\nBusiness Value:\
    \ Executive dashboard with comprehensive market intelligence and KPIs.\n\nPurpose:\
    \ Enables data-driven decision making through advanced analytics and business\
    \ intelligence.\n\nComplexity: Dashboard CTEs (8+ levels), multi-dimensional analytics,\
    \ KPI calculations\n\nExpected Output: Query results with analysis and recommendations.\n\
    \n---\n\nUse Case: Optimize query performance across PostgreSQL.\n\nDescription:\
    \ Analyzes cross-database performance using CTEs for query efficiency metrics,\
    \ optimization recommendations, and performance benchmarking.\n\nUse Case: Optimize\
    \ query performance across PostgreSQL.\n\nBusiness Value: Performance optimization\
    \ report with efficiency metrics and optimization recommendations.\n\nPurpose:\
    \ Enables data-driven decision making through advanced analytics and business\
    \ intelligence.\n\nComplexity: Performance CTEs (7+ levels), efficiency metrics,\
    \ optimization analysis\n\nExpected Output: Query results with analysis and recommendations.\n\
    \n---\n\n1. Create Database Schema:\n   \n\n2. Load Sample Data (optional):\n\
    \   \n\nRun the ETL pipeline to extract data from government sources:\n\nExecute\
    \ queries from `queries/queries.md` using your preferred database client or application.\n\
    \nRun the validation suite to verify queries:\n\n---\n\nLast Updated: 2026-02-04\n\
    \n---\n\nAll queries in this database are designed to work across multiple database\
    \ platforms:\n\n- PostgreSQL: Full support with standard SQL features\n\nQueries\
    \ use standard SQL syntax and avoid platform-specific features to ensure compatibility.\n\
    \n---\n\nDocument Information:\n\n- Generated: 20260210-0115\n- Database: db-11\n\
    - Type: Parking Intelligence Database\n- Queries: 30 production queries\n- Status:\
    \ âœ… Complete Comprehensive Deliverable"
  version: 1.0.0
  contact:
    name: Database Team
  license:
    name: MIT
servers:
- url: postgresql://localhost:5432/db_11
  description: PostgreSQL Server with PostGIS
tags:
- name: schema
  description: Database schema information
- name: tables
  description: Table definitions and structures
- name: spatial
  description: Spatial data types and operations
- name: queries
  description: SQL query definitions and metadata
- name: relationships
  description: Table relationships and foreign keys
paths:
  /schema:
    get:
      tags:
      - schema
      summary: Get database schema overview
      description: Returns overview information about the database schema
      responses:
        '200':
          description: Schema overview
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SchemaOverview'
  /tables:
    get:
      tags:
      - tables
      summary: List all tables
      description: Returns a list of all tables in the database
      responses:
        '200':
          description: List of tables
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Table'
  /tables/{tableName}:
    get:
      tags:
      - tables
      summary: Get table details
      description: Returns detailed information about a specific table
      parameters:
      - name: tableName
        in: path
        required: true
        schema:
          type: string
        description: Name of the table
      responses:
        '200':
          description: Table details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Table'
  /queries:
    get:
      tags:
      - queries
      summary: List all SQL queries
      description: Returns metadata for all SQL queries
      responses:
        '200':
          description: List of queries
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Query'
  /queries/{queryNumber}:
    get:
      tags:
      - queries
      summary: Get query details
      description: Returns detailed information and SQL code for a specific query
      parameters:
      - name: queryNumber
        in: path
        required: true
        schema:
          type: integer
        description: Query number (1-30)
      responses:
        '200':
          description: Query details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Query'
  /spatial/operations:
    get:
      tags:
      - spatial
      summary: List spatial operations
      description: Returns available spatial operations and functions
      responses:
        '200':
          description: List of spatial operations
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SpatialOperation'
components:
  schemas:
    SchemaOverview:
      type: object
      properties:
        database_name:
          type: string
          example: db-1
        database_type:
          type: string
          example: Chat/Messaging System
        created_date:
          type: string
          format: date
          example: '2026-02-03'
        total_tables:
          type: integer
          example: 11
        supported_platforms:
          type: array
          items:
            type: string
          example:
          - PostgreSQL
        table_groups:
          type: array
          items:
            $ref: '#/components/schemas/TableGroup'
    TableGroup:
      type: object
      properties:
        name:
          type: string
          example: User Management
        tables:
          type: array
          items:
            type: string
          example:
          - profiles
    Table:
      type: object
      required:
      - name
      - columns
      properties:
        name:
          type: string
          example: profiles
        description:
          type: string
          example: Stores user profile information
        columns:
          type: array
          items:
            $ref: '#/components/schemas/Column'
        indexes:
          type: array
          items:
            $ref: '#/components/schemas/Index'
        constraints:
          type: array
          items:
            $ref: '#/components/schemas/Constraint'
        foreign_keys:
          type: array
          items:
            $ref: '#/components/schemas/ForeignKey'
    Column:
      type: object
      required:
      - name
      - type
      properties:
        name:
          type: string
          example: id
        type:
          type: string
          example: UUID
        nullable:
          type: boolean
          example: false
        default:
          type: string
          nullable: true
          example: gen_random_uuid()
        description:
          type: string
          example: Primary key - unique user identifier
        primary_key:
          type: boolean
          example: true
    Index:
      type: object
      properties:
        name:
          type: string
          example: idx_profiles_username
        columns:
          type: array
          items:
            type: string
          example:
          - username
        unique:
          type: boolean
          example: true
        type:
          type: string
          example: btree
    Constraint:
      type: object
      properties:
        name:
          type: string
          example: pk_profiles
        type:
          type: string
          enum:
          - PRIMARY KEY
          - UNIQUE
          - CHECK
          - NOT NULL
          example: PRIMARY KEY
        columns:
          type: array
          items:
            type: string
          example:
          - id
    ForeignKey:
      type: object
      properties:
        name:
          type: string
          example: fk_chats_created_by
        from_table:
          type: string
          example: chats
        from_column:
          type: string
          example: created_by
        to_table:
          type: string
          example: profiles
        to_column:
          type: string
          example: id
    Query:
      type: object
      required:
      - number
      - title
      - sql
      properties:
        number:
          type: integer
          example: 1
        title:
          type: string
          example: Production-Grade User Activity Analysis
        description:
          type: string
          example: Enterprise-level user activity analysis
        complexity:
          type: string
          example: Deep nested CTEs (5+ levels)
        sql:
          type: string
          example: WITH user_registration_cohorts AS (...)
        expected_output:
          type: string
          example: Top 20 users ranked by message activity
        categories:
          type: array
          items:
            type: string
          example:
          - User Activity Analysis
          - Cohort Analytics
        database_compatibility:
          type: object
          properties:
            postgresql:
              type: boolean
              example: true
        businessUseCase:
          type: string
          example: Custom Weather Impact Modeling
        clientDeliverable:
          type: string
          example: Forecast accuracy report
        businessValue:
          type: string
          example: Quantifies forecast reliability
        spatial_operations:
          type: array
          items:
            type: string
          example:
          - ST_WITHIN
          - ST_DISTANCE
    SpatialColumn:
      type: object
      properties:
        name:
          type: string
          example: grid_cell_geom
        type:
          type: string
          enum:
          - GEOGRAPHY
          - GEOMETRY
          example: GEOGRAPHY
        geometry_type:
          type: string
          enum:
          - POINT
          - POLYGON
          - LINESTRING
          - MULTIPOINT
          - MULTIPOLYGON
          - MULTILINESTRING
          example: POINT
        crs:
          type: string
          example: EPSG:4326
        description:
          type: string
          example: Point geometry for grid cell center
    SpatialOperation:
      type: object
      properties:
        name:
          type: string
          example: ST_WITHIN
        description:
          type: string
          example: Checks if one geometry is within another
        syntax:
          type: string
          example: ST_WITHIN(geometry1, geometry2)
        return_type:
          type: string
          example: BOOLEAN
        supported_platforms:
          type: array
          items:
            type: string
          example:
          - PostgreSQL (PostGIS)
  examples:
    ProfilesTable:
      summary: Example profiles table
      value:
        name: profiles
        description: Stores user profile information
        columns:
        - name: id
          type: UUID
          nullable: false
          primary_key: true
          description: Primary key - unique user identifier
        - name: username
          type: VARCHAR(255)
          nullable: false
          description: Unique username for login
        indexes:
        - name: idx_profiles_username
          columns:
          - username
          unique: true
    QueryExample:
      summary: Example query
      value:
        number: 1
        title: Production-Grade User Activity Analysis
        description: Enterprise-level user activity analysis
        sql: WITH user_registration_cohorts AS (...) SELECT ...
        expected_output: Top 20 users ranked by message activity
